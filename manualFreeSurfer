
su
tcsh


source $FREESURFER_HOME/SetUpFreeSurfer.csh


#create subjects:
recon-all -openmp 8 -s subject1000 -i /home/oualid/Desktop/1000_3.nii




fixup_mni_paths



recon-all -openmp 8 -s bert -autorecon1  %%recon-all -cw256 -openmp 8 -s bert -autorecon1
recon-all -openmp 8 -s bert -autorecon2  %%recon-all -cw256 -openmp 8 -s bert -autorecon2

#To view the subcortical segmentation results, type:

	tkmedit bert norm.mgz -segmentation aseg.mgz $FREESURFER_HOME/FreeSurferColorLUT.txt




How do I get the data back into the original space?
	
	mri_convert -rl rawavg.mgz -rt nearest aseg.mgz aseg2raw.nii.gz

The volume output (aseg.mgz, aparc+aseg.mgz, etc…) of Freesurfer will probably be in a different image space than your original data (this output is always 256x256x256, 1mm^3, and in coronal orientation). If you'd like to get this data back into the same space as your orignal data, you can use the freesurfer command “mri_convert” to do this:

mri_convert -rl rawavg.mgz -rt nearest aseg.mgz aseg2raw.nii.gz

where the -rl flag means “reslice like” (basically the “target”; the file “rawavg.mgz” in the mri/ folder is in the original image space) and -rt is the resample type (interpolate, weighted, nearest, sinc or cubic; default is interpolate). For label files like aseg.mgz and aparc+aseg.mgz, you'll want to use “nearest” so you don't get fractional values.





%%Overlap measures:

%Right_VentralDC
	mri_compute_overlap -t 60 61 aseg2raw.nii.gz asegGroundTruth.mgz 61
%Left_VentralDC
	mri_compute_overlap -t 28 62 aseg2raw.nii.gz asegGroundTruth.mgz 62




mri_convert aseg.mgz aseg.nii
mri_info --dim asegGroundTruth.mgz
mri_binarize
mri_binarize --i /usr/local/freesurfer/subjects/bert/mri/aseg.mgz --o rVDC.mgz --match 60
mri_binarize --i /usr/local/freesurfer/subjects/bert/mri/aseg.mgz --o lVDC.mgz --match 28





